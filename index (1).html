<!DOCTYPE HTML>
<html>
	<head>
		<title>Fraud Sentinel</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

	</head>
	<body class="is-preload" onload="constructFeed()">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<div style="text-align: center; margin-top: 50px">
						<span class="logo"><img src="logo.png" alt="" /></span>
						<h1>Fraud Sentinel</h1>
						<p> From the mind of Rajiv Govind, the easiest way to protect yourself against fraud</p>
					</div>


				<!-- Nav -->
					<nav id="nav">
						<ul>
							<li><a href="#intro" class="active">SMS Checker</a></li>
							<li><a href="#first">Website Checker</a></li>
							<li><a href="#second">Phone Checker</a></li>
							<li><a href="#cta">About Us</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Introduction -->
							<section id="intro" class="main">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>SMS Checker</h2>
										</header>
										<p> Did you just receive an SMS or e-mail that feels fishy? A curious spelling mistake, or providing you an unasked OTP? Just copy the text and pase it below, and our AI will help you find it whether it's fraud or not. </p>

										<input type="text" name="smsInput" width="70%" id="smsInputUser" style="display: inline-block;"> </input>
										<br> <br>
										<button onclick="smsChecker()" style="display: inline-block; text-align: center;"> Check your SMS </button>
										<br> <br>
										<p id="smsResult"> </p>
									</div>
								</div>
							</section>

						<!-- First Section -->

						<!-- Introduction -->
							<section id="first" class="main">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>Website Checker</h2>
										</header>
										<p> Did you just receive a website link that feels fishy? Asking for too much information, or spoofing another website? You are at the right place. Put in the suspicious link below, and we will tell you whether the link is fraudulent. </p>

										<input type="text" name="websitInput" width="70%" id="websiteInputUser" style="display: inline-block;"> </input>
										<br> <br>
										<button onclick="websiteChecker()" style="display: inline-block; text-align: center;"> Check your link </button>
										<br> <br>
										<p id="websiteResult"> </p>
									</div>
								</div>
							</section>

							<section id="second" class="main">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>Phone Checker</h2>
										</header>
										<p> Did you just receive a call from a number that feels fishy? You can use our phone checker to check if there are spam reports on the number that called you. </p>

										<input type="text" name="phoneInput" width="70%" id="phoneInputUser" style="display: inline-block;"> </input>
										<br> <br>
										<button onclick="phoneChecker()" style="display: inline-block; text-align: center;"> Check your number </button>
										<br> <br>
										<p id="phoneResult"> </p>
									</div>
								</div>
							</section>

						<!-- Second Section -->
							<section id="third" class="main special">
								<header class="major">
									<h2>News For You </h2>
									<p> The latest news from the Cyber Security world, so you can stay up to date</p>
								</header>


								<ol style="text-align: left"> 
								<li>  <h4 id="title0"> <b> </b></h4> 
								<div id="story0"> </div> </li>

								<li> <b> <h4 id="title1"> </h4> </b>
								<div id="story1"> </div> </li>

								<li> <b><h4 id="title2"> </h4></b>
								<div id="story2"> </div> </li>
								
								<li> <b><h4 id="title3"> </h4></b>
								<div id="story3"> </div> </li>

								<li> <b><h4 id="title4"> </h4></b>
								<div id="story4"> </div> </li>

								<li> <b><h4 id="title5"> </h4></b>
								<div id="story5"> </div> </li>
								
								<li> <b><h4 id="title6"> </h4></b>
								<div id="story6"> </div> </li>

								<li> <b><h4 id="title7"> </h4></b>
								<div id="story7"> </div> </li>

								<li> <b><h4 id="title8"> </h4></b>
								<div id="story8"> </div> </li>
								
								<li> <b><h4 id="title9"> </h4> </b>
								<div id="story9"> </div> </li>
								</ol>

							</section>

						<!-- Get Started -->
							<section id="cta" class="main special">
								<header class="major">
									<h2>Learn the patterns</h2>
									<p> Stay safe out there </p>
								</header>
								<footer class="major">
									<ul class="actions special">
										<li><a href="generic.html" class="button primary">Get Started</a></li>
										<li><a href="generic.html" class="button">Learn More</a></li>
									</ul>
								</footer>
							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<h2>Aliquam sed mauris</h2>
							<p>Sed lorem ipsum dolor sit amet et nullam consequat feugiat consequat magna adipiscing tempus etiam dolore veroeros. eget dapibus mauris. Cras aliquet, nisl ut viverra sollicitudin, ligula erat egestas velit, vitae tincidunt odio.</p>
							<ul class="actions">
								<li><a href="generic.html" class="button">Learn More</a></li>
							</ul>
						</section>
						<section>
							<h2>Etiam feugiat</h2>
							<dl class="alt">
								<dt>Address</dt>
								<dd>1234 Somewhere Road &bull; Nashville, TN 00000 &bull; USA</dd>
								<dt>Phone</dt>
								<dd>(000) 000-0000 x 0000</dd>
								<dt>Email</dt>
								<dd><a href="#">information@untitled.tld</a></dd>
							</dl>
							<ul class="icons">
								<li><a href="#" class="icon brands fa-twitter alt"><span class="label">Twitter</span></a></li>
								<li><a href="#" class="icon brands fa-facebook-f alt"><span class="label">Facebook</span></a></li>
								<li><a href="#" class="icon brands fa-instagram alt"><span class="label">Instagram</span></a></li>
								<li><a href="#" class="icon brands fa-github alt"><span class="label">GitHub</span></a></li>
								<li><a href="#" class="icon brands fa-dribbble alt"><span class="label">Dribbble</span></a></li>
							</ul>
						</section>
						<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="https://requirejs.org/docs/release/2.3.6/comments/require.js"></script>

			<script type="text/javascript">
				
				function constructFeed(){
					console.log("let the rssing begin");
					var feedURL = "http://feeds.feedburner.com/eset/blog";
				  	$.ajax({
				    	type: 'GET',
				    	url: "https://api.rss2json.com/v1/api.json?rss_url=" + feedURL,
				    	dataType: 'jsonp',
				    	success: function(result) {
				    		console.log("haha");
				    		for(var i = 0; i < 10; i++){
				    			var storyID = "story" + i;
				    			var titleID = "title" + i; 

				    			var despacito = result.items[i].description;
				    			var index = despacito.indexOf('</p>');
				    			var newdespacito = result.items[i].description.slice(0,index);
				    			var finaldespacito = newdespacito.slice(4);

				    			var link = result.items[i].link;

								document.getElementById(titleID).innerHTML = '<b>' + result.items[i].title + '</b>';

				    			document.getElementById(storyID).innerHTML = finaldespacito;

								document.getElementById(storyID).innerHTML += ". Read more " + 

								'<a href="' + link + '" target="_blank"> <u> here </u> </a> <br> <br>';
				    		}
				    	}
				    })
				}

			</script>


			<script type="text/javascript">
				function smsChecker(){
					console.log("func works!");
					var inputfromuser= document.getElementById("smsInputUser").value;
					const q = encodeURIComponent(inputfromuser);
					const uri = 'https://api.wit.ai/message?v=20201104&q=' + q;
					const auth = 'Bearer ' + 'XQY7YIQ3ALNI5JOB6X2Q5QQ647QECRKC';
					fetch(uri, {headers : {Authorization : auth} })
						.then (res => res.json())
						.then(data => {
						     var intentions= data.intents;
							 var arr2= Object.entries(intentions);
							 var confidence= arr2[0][1].confidence;
							 if (confidence > 0.7 && arr2[0][1].name=="scam"){
							 	document.getElementById("smsResult").innerText = "We are " + confidence*100 + "% that this is a fraudulent message. Please be careful!";
							 } else if (arr2[0][1].name=="ham") {
							 		document.getElementById("smsResult").innerText = "We are " + (confidence)*100 + "% that this is a safe message. Continue to be careful!";
							 }
							 else if (confidence<0.7){
							 	document.getElementById("smsResult").innerText = "We are " + (1-confidence)*100 + "% that this is a safe message. Continue to be careful!";
							 }
							 
				 })
			}
			</script>

			<script type="text/javascript">

				function phoneChecker(){

					const axiosInstance = axios.create({
					  headers: {
					    clientSecret: 'lvc22mp3l1sfv6ujg83rd17btt',
					    'Content-Type': 'application/json'
					  }
					});

					const proxyurl = 'https://cors-anywhere.herokuapp.com/';
					const url = 'https://search5-noneu.truecaller.com/v2/search';

					return axiosInstance.get(proxyurl + url, {
					      params: {
					        q:document.getElementById("phoneInputUser").value,
					        countryCode: 'IN',
					        type: 4,
					        locAddr: '',
					        placement: 'SEARCHRESULTS,HISTORY,DETAILS',
					        encoding: 'json'
					      },
					      headers: {
					        Authorization: `Bearer a1i0Q--PRQncWk2FxUNfqYT5I_NoCw2dU9WGr6ydoPTJc3_nnMBs9G6bp5jvGfEI`
					      }
					    })
					    .then(response => {
					      console.log(response.data);
					      console.log(response.data.data[0].spamInfo);																			
					      if (1==1){
					      	document.getElementById("phoneResult").innerText = "This is a number associated with " + response.data.data[0].spamInfo.spamScore + " known scams. Please block this number.";
					      }else{
					      	document.getElementById("phoneResult").innerText = "According to our records, this number is saved under the name " + response.data.data[0].name + ". This number is not associated with any known scams.";
					      }
					      return (response.data)
					    }, err => err.response.data)

				}
			</script>

			<script type="text/javascript">
				
				function websiteChecker(){
					const proxyURL= 'https://cors-anywhere.herokuapp.com/';
					var urlInput = document.getElementById("websiteInputUser").value;
					console.log(urlInput);
					var detected= [];
					const uri = 'https://www.virustotal.com/vtapi/v2/url/report?apikey=6c00938a72deb7d02060f198f33d0015e6bd5b7ce6cdbedf4d2656168bf09345&resource=' + urlInput;
					fetch(proxyURL+uri)
						.then (res => res.json())
						.then(data => {
	 						console.log(data.positives);
	 						console.log(data.total);
	 						const ob2 = data.scans;
	 						const array2 = Object.entries(ob2);
	 						console.log(array2);
	 						for (var i = 0; i < array2.length; i++) {
								 var value  = array2[i];
		 						if (value[1].detected==true) {
			 					console.log(value[0])
			 					detected.push(value[0])
		 						}
		 
	 						}
							console.log(detected)
							if (detected.length > 2){
								console.log("Here");
								document.getElementById("websiteResult").innerHTML = '<div style="text-align:left"> <p> We are pretty sure that this website is suspicious. These are the antivirus engines that detected it: </p> <ol>';

								for (var i = 0; i < detected.length; i++) {
										console.log("here2")
										var value  = detected[i];
										if (i === detected.length - 1){
											document.getElementById("websiteResult").innerHTML += '<li>' + value+ '</li>';
										}
										else {
											document.getElementById("websiteResult").innerHTML += '<li>' + value+ '</li>';
										}
								}
								document.getElementById("websiteResult").innerHTML += '</ol> </div>';
							}
							else{
								document.getElementById("websiteResult").innerText += "We are pretty sure that this website is not suspicious. Out of "+ data.total + " engines, "+ data.positives + " detected this website as malicious";
							}
					})
				}

			</script>
	</body>
</html>